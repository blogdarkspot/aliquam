<p>Uma coisa interessante sobre a época de faculdade é que tinha muito bar e junto com ele muitas discussões sobre assunto do qual não entendiamos nada ou tinhamos pouco conhecimento pelo fato de estar inciando em uma nova carreira e ser meros estudantes. O uso do <code class="highlighter-rouge">goto</code> era um desses assuntos polêmico e vinha seguido de um mantra que era “não use pois não é uma boa prática de programação… ohmmmmmm”.</p>

<p>Agora quero compartilhar o seguinte exemplo de implmenteção de um método:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="cm">/**
 * versão com lambda
 */</span>
<span class="kt">void</span> <span class="n">EstacaoRecebimento</span><span class="o">::</span><span class="n">findItem</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">errorMSG</span> <span class="o">=</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">]()</span>
    <span class="p">{</span>
        <span class="n">QMessageBox</span><span class="o">::</span><span class="n">critical</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">tr</span><span class="p">(</span><span class="s">"Error"</span><span class="p">),</span>
                              <span class="n">tr</span><span class="p">(</span><span class="s">"Item %1 não pode ser encontrado"</span><span class="p">).</span><span class="n">arg</span><span class="p">(</span><span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">leItem</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">()),</span> <span class="n">QMessageBox</span><span class="o">::</span><span class="n">Ok</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="k">if</span><span class="p">(</span><span class="n">m_model</span> <span class="o">!=</span> <span class="nb">nullptr</span> <span class="o">&amp;&amp;</span> <span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">leItem</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">().</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">cbRemover</span><span class="o">-&gt;</span><span class="n">isChecked</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">m_model</span><span class="o">-&gt;</span><span class="n">checkIfSubItemMetadataExists</span><span class="p">(</span><span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">leItem</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">()))</span>
                <span class="n">errorMSG</span><span class="p">();</span>
	    <span class="k">else</span>
                <span class="n">m_model</span><span class="o">-&gt;</span><span class="n">removeItem</span><span class="p">(</span><span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">leItem</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">());</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">m_model</span><span class="o">-&gt;</span><span class="n">findItemAndSubItens</span><span class="p">(</span><span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">leItem</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">()))</span>
                <span class="n">errorMSG</span><span class="p">();</span>
	    <span class="k">else</span>
                <span class="n">subItemFound</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">cbRemover</span><span class="o">-&gt;</span><span class="n">setChecked</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>
    <span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">leItem</span><span class="o">-&gt;</span><span class="n">clear</span><span class="p">();</span>
<span class="p">}</span>


<span class="cm">/**
* versão com goto, não use se quiser seguir as boas práticas
*/</span>
<span class="kt">void</span> <span class="n">EstacaoRecebimento</span><span class="o">::</span><span class="n">findItem</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">m_model</span> <span class="o">!=</span> <span class="nb">nullptr</span> <span class="o">&amp;&amp;</span> <span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">leItem</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">().</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">cbRemover</span><span class="o">-&gt;</span><span class="n">isChecked</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">m_model</span><span class="o">-&gt;</span><span class="n">checkIfSubItemMetadataExists</span><span class="p">(</span><span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">leItem</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">()))</span>
                <span class="k">goto</span> <span class="n">ERROR</span><span class="p">;</span>

            <span class="n">m_model</span><span class="o">-&gt;</span><span class="n">removeItem</span><span class="p">(</span><span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">leItem</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">());</span>
            <span class="k">goto</span> <span class="n">DONE</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">m_model</span><span class="o">-&gt;</span><span class="n">findItemAndSubItens</span><span class="p">(</span><span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">leItem</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">()))</span>
                <span class="k">goto</span> <span class="n">ERROR</span><span class="p">;</span>

            <span class="n">subItemFound</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
            <span class="k">goto</span> <span class="n">DONE</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="n">ERROR</span><span class="o">:</span>
    <span class="n">QMessageBox</span><span class="o">::</span><span class="n">critical</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">tr</span><span class="p">(</span><span class="s">"Error"</span><span class="p">),</span>
                          <span class="n">tr</span><span class="p">(</span><span class="s">"Item %1 não pode ser encontrado"</span><span class="p">).</span><span class="n">arg</span><span class="p">(</span><span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">leItem</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">()),</span> <span class="n">QMessageBox</span><span class="o">::</span><span class="n">Ok</span><span class="p">);</span>
<span class="n">DONE</span><span class="o">:</span>
    <span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">cbRemover</span><span class="o">-&gt;</span><span class="n">setChecked</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>
    <span class="n">m_ui</span><span class="o">-&gt;</span><span class="n">leItem</span><span class="o">-&gt;</span><span class="n">clear</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Comparando as duas versões a com goto é bem mais fluida, você não necessita voltar no código para entender o que está acontecendo e sendo assim para mim e para o revisor dos meus PR’s a melhor versão para se ler e compreender o código.</p>

<p>Não é por que muitas pessoas no passado usaram o recurso de uma maneira ruim que ele é um mau recurso. Em vez de usar os péssimos exemplos e ficar repetindo mantras sem questioná-los, podemos procurar bons exemplos e aprender como usar os recursos de maneira mais eficiente.</p>
