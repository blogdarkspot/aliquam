<h1 id="usando-libs-externas">Usando libs externas</h1>

<p>O CMake utiliza modulos para encontrar libs de maneira pratica e inclui-las no projeto, quando o Cmake é instalado ele já vem com milhares desses módulos já instalados, utilizando o comando
<code class="highlighter-rouge">cmake --help-module-list</code> é possível ver todos os modulos que o cmake possui. Todos os files desses modulos ficam localizado na pasta de instalação do cmake <em>cmake/module</em>  no caso do Ubuntu
<em>/usr/share/cmake/Modules/</em> .</p>

<p>No exemplo a seguir eu vou adicionar algumas bibliotecas que já vem com os módulos por padrão no CMake <em>zlib BZip2 pthread</em></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include BZip2
find_package(BZip2 REQUIRED)
include_directories(${BZIP2_INCLUDE_DIRS})
set(LIBS ${LIBS} ${BZIP2_LIBRARIES})

#include Zlib
find_package(ZLIB REQUIRED)
include_directories(${ZLIB_INCLUDE_DIRS})
set(LIBS ${LIBS} ${ZLIB_LIBRARIES})

#include pThreads
find_package(Threads REQUIRED)
set(LIBS ${LIBS} ${CMAKE_THREAD_LIBS_INIT})

target_link_libraries(projeto ${LIBS})
</code></pre></div></div>
<p>Para adicionar as libs usamos o comando <a href="https://cmake.org/cmake/help/v3.0/command/find_package.html">find_package</a>  onde o único argumento obrigatório é o nome do pacote. Assim que o módulo é encontrado
é possível utilizar as variáveis disponibilizadas pelo modulo para adicionar a lib e a header, é possível verificar o nome das variáveis usando o comando <code class="highlighter-rouge">cmake --help-module nome_do_package</code> .</p>

<p>Todas as libs encontradas eu adicionei na variavel <code class="highlighter-rouge">${LIB}</code> para ficar mais prático de fazer o link no final do Projeto.</p>

<h2 id="adicionando-libs-que-não-vem-no-pacote-do-cmake">Adicionando libs que não vem no pacote do CMake</h2>

<p>Primeiro na raiz do projeto adicione o seguinte diretório <em>cmake/Module</em> em seguida no CMakeLists.txt adicione as seguintes linhas :</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/cmake/Module/")

</code></pre></div></div>
<p>Agora o nosso diretório será reconhecido para a busca dos packages, em seguida adicione todos os packages que não estão presentes por padrão na pasta module e pronto.</p>

<p>Se você usar o cmake-gui ou o ccmakke as variáveis irão aparecer no cache!</p>

<p><img src="../img/posts/2017-04-23-find-lib-with-cmake/find-lib-with-cmake-1.png" alt="ccmake imagem 1" /></p>

<p><img src="../img/posts/2017-04-23-find-lib-with-cmake/find-lib-with-cmake-2.png" alt="ccmake imagem 2" /></p>
<h2 id="referências">Referências</h2>

<p><a href="https://cmake.org/Wiki/CMake:How_To_Find_Libraries">CMake Wiki</a></p>

